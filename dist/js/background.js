!function(a){function b(a){e.activeTabId=a,chrome.tabs.get(a,function(a){e.activeTabUrl=a.url,e.activeTabTitle=a.title,c(e.activeTabId,e.activeTabUrl)})}function c(a,b){var c=-1!==b.indexOf("chrome://")||-1!==b.indexOf("chrome-extension://")||-1!==b.indexOf("file://");return c?void chrome.browserAction.setBadgeText({text:"",tabId:a}):void(e.checkedUrl!==b&&(e.checkedUrl=b,d.isAuthenticated&&(chrome.browserAction.setBadgeBackgroundColor({color:"#66cc33"}),d.API.getPost(b).done(function(b){var c=0!==b.posts.length;chrome.browserAction.setBadgeText({text:c?"âœ“":"",tabId:a})}).fail(function(){chrome.browserAction.setBadgeText({text:"",tabId:a})}))))}var d=a.Pinput||{},e=d.Background||{};e.activeTabId=0,e.activeTabUrl="",e.activeTabTitle="",e.checkedUrl="";var f=chrome.storage.sync;f.get([d.StorageKey.authToken,d.StorageKey.isAuthenticated],function(a){d.authToken=a[d.StorageKey.authToken],d.isAuthenticated=!!a[d.StorageKey.isAuthenticated]}),chrome.tabs.onActivated.addListener(function(a){b(a.tabId)}),chrome.tabs.onUpdated.addListener(function(a){e.activeTabId===a&&b(a)}),chrome.windows.onFocusChanged.addListener(function(){chrome.windows.getCurrent({populate:!0},function(a){a.tabs.forEach(function(a){a.active&&b(a.id)})})}),chrome.runtime.onMessage.addListener(function(a,b,c){c({url:e.activeTabUrl,title:e.activeTabTitle})}),chrome.runtime.onInstalled.addListener(function(a){"install"==a.reason&&chrome.tabs.create({url:"/html/options.html"})}),a.Pinput=d}(this);